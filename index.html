<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Farewell to the One I So Loved</title>
    <style>
        :root {
            --cosmic-primary: #000428;
            --cosmic-secondary: #004e92;
            --cosmic-accent: #b794f6;
            --cosmic-glow: #9f7aea;
            --cosmic-text: #f0e6ff;
            --scroll-progress: 0;
            --mouse-x: 50%;
            --mouse-y: 50%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(
                180deg, 
                var(--cosmic-primary) 0%, 
                var(--cosmic-secondary) calc(100% - var(--scroll-progress) * 100%)
            );
            min-height: 100vh;
            font-family: 'Georgia', serif;
            color: #ffffff;
            overflow-x: hidden;
            position: relative;
        }

        /* Entry Overlay */
        .entry-overlay {
            position: fixed;
            inset: 0;
            background: radial-gradient(
                ellipse at var(--mouse-x) var(--mouse-y), 
                #1b2735 0%, 
                #090a0f 100%
            );
            z-index: 9999;
            display: grid;
            place-items: center;
            transition: opacity 2s cubic-bezier(0.4, 0, 0, 1), 
                        transform 2s cubic-bezier(0.4, 0, 0, 1);
            will-change: opacity, transform;
        }

        .entry-overlay.hidden {
            opacity: 0;
            transform: scale(1.05);
            pointer-events: none;
        }

        .entry-content {
            text-align: center;
            animation: breathe 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-15px) scale(1.02); }
        }

        .entry-title {
            font-size: clamp(1.5em, 4vw, 2.5em);
            margin-bottom: 20px;
            background: linear-gradient(
                90deg,
                var(--cosmic-text),
                var(--cosmic-accent),
                var(--cosmic-glow),
                var(--cosmic-accent),
                var(--cosmic-text)
            );
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
            letter-spacing: 2px;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .entry-subtitle {
            font-size: 1.2em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 40px;
            font-style: italic;
        }

        .enter-button {
            padding: 15px 40px;
            font-size: 1.1em;
            background: transparent;
            border: 1px solid rgba(183, 148, 246, 0.3);
            color: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
        }

        .enter-button::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(
                circle at var(--mouse-x) var(--mouse-y),
                rgba(183, 148, 246, 0.2),
                transparent 70%
            );
            opacity: 0;
            transition: opacity 0.3s;
        }

        .enter-button:hover::after {
            opacity: 1;
        }

        .enter-button:hover {
            border-color: rgba(183, 148, 246, 0.6);
            color: white;
            transform: translateY(-2px);
        }

        /* Optimized Canvas Background */
        #starCanvas {
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0;
            transition: opacity 3s ease;
        }

        #starCanvas.visible {
            opacity: 1;
        }

        /* Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 10;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Header */
        h1 {
            font-size: clamp(1.8em, 5vw, 2.5em);
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(
                135deg,
                var(--cosmic-text),
                var(--cosmic-accent),
                var(--cosmic-glow)
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(159, 122, 234, 0.5));
            line-height: 1.3;
            opacity: 0;
            animation: fadeInScale 1s forwards 0.5s;
        }

        @keyframes fadeInScale {
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
        }

        /* Audio Container */
        .audio-container {
            text-align: center;
            margin: 30px auto;
            padding: 25px;
            max-width: 500px;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.02),
                rgba(255, 255, 255, 0.05)
            );
            border-radius: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: fadeInScale 1s forwards 0.7s;
        }

        .audio-container::before {
            content: '';
            position: absolute;
            inset: -50%;
            background: conic-gradient(
                from 0deg at 50% 50%,
                transparent,
                var(--cosmic-accent),
                transparent
            );
            animation: spin 20s linear infinite;
            opacity: 0.05;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .audio-label {
            display: block;
            margin-bottom: 5px;
            color: var(--cosmic-accent);
            font-style: italic;
            font-size: 1.1em;
            position: relative;
            z-index: 1;
        }

        .audio-subtitle {
            display: block;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
            position: relative;
            z-index: 1;
        }

        .audio-visual {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 4px;
            height: 40px;
            margin: 20px 0;
            position: relative;
            z-index: 1;
        }

        .audio-bar {
            width: 4px;
            background: linear-gradient(
                to top,
                var(--cosmic-accent),
                var(--cosmic-glow)
            );
            border-radius: 2px;
            transform-origin: bottom;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .audio-bar.playing {
            animation: wave 1s ease-in-out infinite;
        }

        .audio-bar:nth-child(1) { height: 35%; animation-delay: 0ms; }
        .audio-bar:nth-child(2) { height: 55%; animation-delay: 100ms; }
        .audio-bar:nth-child(3) { height: 45%; animation-delay: 200ms; }
        .audio-bar:nth-child(4) { height: 70%; animation-delay: 300ms; }
        .audio-bar:nth-child(5) { height: 50%; animation-delay: 400ms; }
        .audio-bar:nth-child(6) { height: 60%; animation-delay: 500ms; }
        .audio-bar:nth-child(7) { height: 40%; animation-delay: 600ms; }

        @keyframes wave {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(1.5); }
        }

        /* Memories */
        .memories {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
            perspective: 1000px;
        }

        .memory-container {
            opacity: 0;
            animation: fadeInScale 1s forwards;
        }

        .memory-container:nth-child(1) { animation-delay: 0.9s; }
        .memory-container:nth-child(2) { animation-delay: 1.1s; }

        .memory {
            width: 250px;
            height: 180px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: 
                0 10px 40px rgba(138, 43, 226, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .memory::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(
                135deg,
                transparent 40%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 60%
            );
            transform: translateX(-100%);
            transition: transform 0.6s;
            z-index: 2;
        }

        .memory:hover::before {
            transform: translateX(100%);
        }

        .memory:hover {
            transform: translateZ(50px) rotateY(10deg) rotateX(-10deg);
        }

        .memory img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s, filter 0.6s;
        }

        .memory:hover img {
            transform: scale(1.1);
            filter: brightness(1.1);
        }

        /* Poem Title */
        h2 {
            font-size: 1.8em;
            text-align: center;
            margin: 50px 0 30px;
            color: var(--cosmic-text);
            font-style: italic;
            letter-spacing: 2px;
            opacity: 0;
            animation: fadeInScale 1s forwards 1.3s;
        }

        /* Letter */
        .letter {
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.02),
                rgba(255, 255, 255, 0.04)
            );
            border-radius: 25px;
            padding: 50px;
            margin: 30px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .letter::before {
            content: '';
            position: absolute;
            inset: -100%;
            background: radial-gradient(
                circle at var(--mouse-x) var(--mouse-y),
                rgba(138, 43, 226, 0.05),
                transparent 50%
            );
            pointer-events: none;
        }

        .letter p {
            line-height: 1.9;
            margin-bottom: 25px;
            font-size: 1.1em;
            color: var(--cosmic-text);
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
        }

        .letter.visible p {
            animation: fadeUp 0.8s forwards;
        }

        @keyframes fadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .letter p:nth-child(1) { animation-delay: 0.1s; }
        .letter p:nth-child(2) { animation-delay: 0.2s; }
        .letter p:nth-child(3) { animation-delay: 0.3s; }
        .letter p:nth-child(4) { animation-delay: 0.4s; }
        .letter p:nth-child(5) { animation-delay: 0.5s; }
        .letter p:nth-child(6) { animation-delay: 0.6s; }
        .letter p:nth-child(7) { animation-delay: 0.7s; }
        .letter p:nth-child(8) { animation-delay: 0.8s; }

        .letter em {
            color: var(--cosmic-accent);
            font-style: normal;
            font-weight: 500;
            transition: all 0.3s;
        }

        .letter em:hover {
            color: white;
            text-shadow: 0 0 20px var(--cosmic-accent);
        }

        /* Thank You */
        .thank-you {
            text-align: center;
            font-size: 1.5em;
            margin: 50px 0;
            font-weight: bold;
            background: linear-gradient(
                90deg,
                #ffd89b,
                var(--cosmic-accent),
                var(--cosmic-glow),
                var(--cosmic-accent),
                #ffd89b
            );
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 4s linear infinite;
            opacity: 0;
        }

        .thank-you.visible {
            animation: fadeInScale 1s forwards, shimmer 4s linear infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.5em; }
            .letter { padding: 30px 20px; }
            .memory { width: 90%; max-width: 300px; height: 200px; }
            .memories { gap: 20px; }
        }

        /* Print Performance */
        @media print {
            * { animation: none !important; }
        }

        /* Reduce motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Entry Overlay -->
    <div class="entry-overlay" id="entryOverlay">
        <div class="entry-content">
            <h2 class="entry-title">A Journey Through the Stars</h2>
            <p class="entry-subtitle">One last dance among the cosmos</p>
            <button class="enter-button">Enter & Listen</button>
        </div>
    </div>

    <!-- Optimized Canvas for Stars -->
    <canvas id="starCanvas"></canvas>

    <div class="container" id="mainContainer">
        <h1>A Farewell to the One I So Loved and Will Love Until the Very End</h1>
        
        <!-- Audio Player -->
        <div class="audio-container">
            <span class="audio-label">♪ Pisces - Tony Ann (Piano Cover) ♪</span>
            <span class="audio-subtitle">From me to you, with all my love</span>
            <div class="audio-visual" id="audioVisual">
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
                <div class="audio-bar"></div>
            </div>
            <audio id="bgMusic" loop>
                <source src="Pisces - Tony Ann (Piano Cover).mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>

        <!-- Memory Images -->
        <div class="memories">
            <div class="memory-container">
                <div class="memory">
                    <img src="Screenshot 2025-02-22 223927.png" alt="A cherished memory">
                </div>
            </div>
            <div class="memory-container">
                <div class="memory">
                    <img src="Screenshot 2025-02-15 134126.png" alt="Another precious moment">
                </div>
            </div>
        </div>

        <h2>To the One I Have So Loved Before</h2>

        <div class="letter" id="letter">
            <p>Maria, from the day I met you, I always knew there was something different about you — a luminescence that transformed my digital world into something cosmic and infinite. In the vast universe of souls, yours shone with a unique brilliance, drawing me in like gravity pulls wandering planets into orbit. You were my supernova in the darkness, radiating beauty you couldn't always see in yourself, like a star unaware of its own light reaching distant galaxies.</p>

            <p>How I would embrace you through pixels and words, wrapping you in virtual warmth that transcended screens, holding you close in our shared digital realm. Your beauty wasn't just in what could be seen, but in the depths — the way your messages held galaxies of emotion, your laughter echoing through our chats like cosmic music. I saw it all, even when shadows of self-doubt clouded your view, and I wanted nothing more than to be the mirror that reflected your true radiance back to you.</p>

            <p>Every memory we created sparkles like its own constellation in my heart — those endless Roblox adventures where we built entire worlds together, crafting kingdoms from blocks and laughter, exploring digital realms as if we were astronauts discovering new planets. Each late-night gameplay session was our own private universe, where "I love you" echoed through chat messages like signals traveling through space, never losing their meaning despite the distance.</p>

            <p>I cherish your kindness that flowed like solar winds carrying warmth across the void, your care that anchored me like gravity, and everything that made you uniquely <em>you</em>. The way you'd share your passion for makeup artistry, blending colors like an artist painting nebulae across the cosmos. Your love for mango Pepsi — that fizzy sweetness you described with such infectious joy it made me smile through the screen. Even the simple pleasure of tortillas became magical when filtered through your words, turning ordinary moments into stardust memories.</p>

            <p>Each day, I would write to you, pouring out verses about what you loved, what sparked your happiness like meteor showers across the night sky, and what dimmed your light, always trying to be your North Star in moments of darkness. My words were my way of holding you, of being present in your world even when pixels were all that connected us.</p>

            <p>Yet, as workloads piled like accumulating asteroids, they slowly drifted us apart, pulling us from those late-night gameplays and whispered "I love you"s that once filled our universe. The extensive demands of life became like dark matter — invisible yet powerful — transforming our constant connection into fleeting glimpses, like comets passing too far apart in their eternal dance. I regret it deeply, this gravitational pull of obligations that widened the distance between our hearts.</p>

            <p>Still, my love for you burns undimmed, an eternal flame in the heart of a dying star, wondering if our paths were meant to align forever or to teach us the beauty of fleeting orbits. You deserve a love as vast and unwavering as the universe itself — one that doesn't leave you waiting in the silence of space, one that honors your radiance, your spirit, your happiness. Though it aches like a black hole's pull, I release you now, not because my feelings have faded — they haven't, for I am still deeply in love — but because I fear I've become an anchor in your stellar journey when you were meant to soar freely through galaxies of joy.</p>

            <p>I value everything — every shared moment in our digital constellation, every message that bridged the space between us, every laugh that defied the silence of the void. You taught me that love can bloom even in virtual spaces, that hearts can touch without hands ever meeting, that souls can dance together across any distance.</p>
        </div>

        <div class="thank-you" id="thankYou">Thank you, Dior, for everything.</div>
    </div>

    <script>
        'use strict';

        // Performance-optimized cosmic experience using functional programming patterns
        const CosmicExperience = (() => {
            // State management using immutable patterns
            const state = new Map([
                ['mouseX', 0.5],
                ['mouseY', 0.5],
                ['scrollProgress', 0],
                ['isPlaying', false]
            ]);

            // Efficient particle pool to prevent GC thrashing
            const particlePool = new Set();
            const maxParticles = 300;
            
            // Star data using TypedArrays for maximum performance
            const starCount = 200;
            const starData = new Float32Array(starCount * 5); // x, y, size, speed, phase
            
            // Initialize stars with functional approach
            const initStars = () => {
                Array.from({ length: starCount }, (_, i) => {
                    const idx = i * 5;
                    starData[idx] = Math.random();     // x
                    starData[idx + 1] = Math.random(); // y
                    starData[idx + 2] = Math.random() * 2 + 0.5; // size
                    starData[idx + 3] = Math.random() * 0.0005 + 0.0001; // speed
                    starData[idx + 4] = Math.random() * Math.PI * 2; // phase
                });
            };

            // Canvas setup with optimal settings
            const setupCanvas = () => {
                const canvas = document.getElementById('starCanvas');
                const ctx = canvas.getContext('2d', { 
                    alpha: true,
                    desynchronized: true 
                });
                
                const resize = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };
                
                resize();
                window.addEventListener('resize', resize, { passive: true });
                
                return { canvas, ctx };
            };

            // Optimized render loop using requestAnimationFrame
            const render = (ctx, canvas) => {
                let animationId;
                let lastTime = 0;
                const targetFPS = 60;
                const frameInterval = 1000 / targetFPS;
                
                const draw = (currentTime) => {
                    animationId = requestAnimationFrame(draw);
                    
                    const deltaTime = currentTime - lastTime;
                    if (deltaTime < frameInterval) return;
                    
                    lastTime = currentTime - (deltaTime % frameInterval);
                    
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // Create gradient based on scroll
                    const scrollProg = state.get('scrollProgress');
                    const gradient = ctx.createRadialGradient(
                        canvas.width * state.get('mouseX'),
                        canvas.height * state.get('mouseY'),
                        0,
                        canvas.width / 2,
                        canvas.height / 2,
                        canvas.width
                    );
                    gradient.addColorStop(0, `rgba(138, 43, 226, ${0.02 + scrollProg * 0.03})`);
                    gradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Render stars efficiently
                    ctx.fillStyle = 'white';
                    for (let i = 0; i < starCount; i++) {
                        const idx = i * 5;
                        const x = starData[idx] * canvas.width;
                        const y = starData[idx + 1] * canvas.height;
                        const size = starData[idx + 2];
                        const phase = starData[idx + 4];
                        
                        // Parallax effect
                        const parallax = size > 1 ? 0.5 : 0.3;
                        const offsetX = (state.get('mouseX') - 0.5) * parallax * 50;
                        const offsetY = (state.get('mouseY') - 0.5) * parallax * 50;
                        
                        // Twinkle effect
                        const brightness = Math.sin(phase) * 0.5 + 0.5;
                        ctx.globalAlpha = brightness * 0.8 + 0.2;
                        
                        ctx.beginPath();
                        ctx.arc(x + offsetX, y + offsetY, size, 0, Math.PI * 2);
                        ctx.fill();
                        
                        // Update phase
                        starData[idx + 4] += starData[idx + 3] * deltaTime;
                    }
                    
                    ctx.globalAlpha = 1;
                };
                
                animationId = requestAnimationFrame(draw);
                
                return () => cancelAnimationFrame(animationId);
            };

            // Throttled mouse handler using functional composition
            const throttle = (func, delay) => {
                let lastCall = 0;
                return (...args) => {
                    const now = Date.now();
                    if (now - lastCall >= delay) {
                        lastCall = now;
                        return func(...args);
                    }
                };
            };

            const handleMouseMove = throttle((e) => {
                state.set('mouseX', e.clientX / window.innerWidth);
                state.set('mouseY', e.clientY / window.innerHeight);
                
                // Update CSS variables for GPU-accelerated animations
                document.documentElement.style.setProperty('--mouse-x', `${state.get('mouseX') * 100}%`);
                document.documentElement.style.setProperty('--mouse-y', `${state.get('mouseY') * 100}%`);
            }, 16); // ~60fps

            // Optimized scroll handler with RAF debouncing
            const handleScroll = (() => {
                let ticking = false;
                
                return () => {
                    if (!ticking) {
                        requestAnimationFrame(() => {
                            const scrolled = window.pageYOffset;
                            const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
                            const progress = Math.min(scrolled / maxScroll, 1);
                            
                            state.set('scrollProgress', progress);
                            document.documentElement.style.setProperty('--scroll-progress', progress);
                            
                            // Update background gradient
                            document.body.style.background = `linear-gradient(
                                180deg,
                                hsl(${223 + progress * 20}, ${100 - progress * 20}%, ${8 + progress * 5}%) 0%,
                                hsl(${209 - progress * 10}, ${100 - progress * 30}%, ${29 + progress * 10}%) 100%
                            )`;
                            
                            ticking = false;
                        });
                        ticking = true;
                    }
                };
            })();

            // Intersection Observer for efficient animation triggering
            const setupIntersectionObserver = () => {
                const observerOptions = {
                    threshold: [0.1, 0.5],
                    rootMargin: '0px'
                };
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, observerOptions);
                
                // Observe elements
                ['#letter', '#thankYou'].forEach(selector => {
                    const el = document.querySelector(selector);
                    if (el) observer.observe(el);
                });
            };

            // Initialize the experience
            const init = () => {
                initStars();
                const { canvas, ctx } = setupCanvas();
                
                // Event listeners with passive option for better scroll performance
                document.addEventListener('mousemove', handleMouseMove, { passive: true });
                window.addEventListener('scroll', handleScroll, { passive: true });
                
                // Entry interaction
                const entryOverlay = document.getElementById('entryOverlay');
                const mainContainer = document.getElementById('mainContainer');
                const starCanvas = document.getElementById('starCanvas');
                const bgMusic = document.getElementById('bgMusic');
                const audioBars = document.querySelectorAll('.audio-bar');
                
                entryOverlay.addEventListener('click', async () => {
                    // Start experience
                    entryOverlay.classList.add('hidden');
                    starCanvas.classList.add('visible');
                    
                    // Play music
                    try {
                        await bgMusic.play();
                        state.set('isPlaying', true);
                        audioBars.forEach(bar => bar.classList.add('playing'));
                    } catch (e) {
                        console.log('Audio autoplay prevented');
                    }
                    
                    // Show content
                    setTimeout(() => {
                        mainContainer.classList.add('visible');
                        setupIntersectionObserver();
                    }, 500);
                    
                    // Start render loop
                    render(ctx, canvas);
                });
                
                // Memory cards tilt effect (optimized)
                const memories = document.querySelectorAll('.memory');
                memories.forEach(memory => {
                    memory.addEventListener('mousemove', throttle((e) => {
                        const rect = memory.getBoundingClientRect();
                        const x = (e.clientX - rect.left) / rect.width - 0.5;
                        const y = (e.clientY - rect.top) / rect.height - 0.5;
                        
                        memory.style.transform = `
                            translateZ(50px)
                            rotateY(${x * 20}deg)
                            rotateX(${-y * 20}deg)
                        `;
                    }, 16));
                    
                    memory.addEventListener('mouseleave', () => {
                        memory.style.transform = 'translateZ(0) rotateY(0) rotateX(0)';
                    });
                });
            };
            
            return { init };
        })();

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', CosmicExperience.init);
        } else {
            CosmicExperience.init();
        }
    </script>
</body>
</html>
